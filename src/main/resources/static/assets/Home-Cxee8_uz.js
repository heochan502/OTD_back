import{_ as R,r as y,c as j,o as H,a as v,b as p,F as D,d as A,t as r,g as Z,e as C,f as ee,u as te,h as J,w as Q,i as s,j as n,k as ae,V as se,l as i,m as W,n as M,p as x,q as z,s as K,v as Y,x as B,y as P,z as O,A as q,B as le,C as ne,D as oe,E as re,G,H as ie,R as ue}from"./index-BjtKrO39.js";const ce={__name:"DailyWeather",setup(_){const c=y([]),l=y(null),h=async()=>{const o=await Z();c.value=o.data},w=o=>`${parseInt(o.substring(0,2),10)}시`,u=j(()=>c.value.map(o=>({...o,time:w(o.fcstTime),emoji:f[o.pty]||f[o.sky]||""}))),f={맑음:"☀️",흐림:"☁️","구름 많음":"🌤️",비:"🌧️",눈:"❄️","비/눈":"🌨️"};return H(async()=>{await h();const o=l.value;o.addEventListener("wheel",g=>{g.preventDefault(),o.scrollLeft+=g.deltaY})}),(o,g)=>(p(),v("div",{class:"info",ref_key:"scrollRef",ref:l},[(p(!0),v(D,null,A(u.value,d=>(p(),v("div",{class:"item",key:d.fcstTime},r(d.time)+" "+r(d.emoji)+" "+r(d.tmp)+"℃ ",1))),128))],512))}},de=R(ce,[["__scopeId","data-v-4d95ab11"]]);C.defaults.baseURL="/api/OTD";const me=_=>C.post("/location/save",{localId:_}).catch(c=>c.response),ve=_=>C.get("/location/search",{params:{keyword:_}}).catch(c=>c.response),pe=()=>C.get("/location").catch(_=>_.response),_e=_=>C.put("/location/select",{localId:_}),fe=_=>C.delete(`/location/delete/${_}`).catch(c=>c.response),X=ee("weather",{state:()=>({refresh:!1}),actions:{homeRefresh(){this.refresh=!this.refresh}}}),ge={class:"search-box card shadow-sm p-4 mb-4"},ye={class:"text-end mt-3"},he={class:"list card p-4 shadow-sm"},we={class:"list-group list-group-flush"},ke={class:"location-name"},$e={class:"list-btn d-flex gap-2"},xe=["onClick"],be=["onClick"],De={__name:"Location",emits:["close"],setup(_,{emit:c}){const l=c,h=X(),w=te(),u=y(""),f=y(null),o=J({items:[],autocomplete:[],list:[]}),g=y(!1),d=y({visible:!1,message:""}),k=y(""),m=y(null),$=y(null),L=y(""),S=(t,e,a=null,U="")=>{g.value=!0,k.value=t,m.value=e,$.value=a,L.value=U},E=async()=>{if(g.value=!1,m.value==="select"){const t=await _e($.value);t&&t.status===200&&(h.homeRefresh(),l("close"),w.push("/"))}else m.value==="remove"&&(await fe($.value)).status===200&&(b("삭제되었습니다."),await V())},b=t=>{d.value.message=t,d.value.visible=!0},I=async()=>{if(!u.value.trim()){b("지역명을 입력하세요");return}const t=await ve(u.value);o.items=t.data,o.autocomplete=t.data.map(e=>`${e.city} ${e.county} ${e.town}`)},F=t=>{u.value=t,f.value=o.items.find(e=>`${e.city} ${e.county} ${e.town}`===t)},T=async()=>{if(!f.value||!f.value.localId){b("지역 정보가 일치하지 않습니다.");return}await me(f.value.localId),b("지역이 저장되었습니다."),await V()},V=async()=>{const t=await pe();o.list=t.data};return Q(u,async t=>{if(!t||typeof t!="string"||!t.trim())return{};await I()}),H(()=>{V()}),(t,e)=>(p(),v(D,null,[s("div",ge,[n(se,{modelValue:u.value,"onUpdate:modelValue":[e[0]||(e[0]=a=>u.value=a),F],items:o.autocomplete,label:"구 / 동을 입력하세요",variant:"solo-filled",placeholder:"예) OO구 OO동","menu-props":{maxHeight:"250px"},onKeyup:ae(I,["enter"])},null,8,["modelValue","items"]),s("div",ye,[s("button",{class:"btn btn-primary",onClick:T}," + 검색한 지역 저장 + "),n(B,{modelValue:d.value.visible,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value.visible=a),"max-width":"300","max-height":"150"},{default:i(()=>[n(W,null,{default:i(()=>[n(M,null,{default:i(()=>[x(r(d.value.message),1)]),_:1}),n(z,null,{default:i(()=>[n(K),n(Y,{class:"primary",text:"",onClick:e[1]||(e[1]=a=>d.value.visible=!1)},{default:i(()=>e[5]||(e[5]=[x("확인")])),_:1,__:[5]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),s("div",he,[e[9]||(e[9]=s("h3",null,"저장한 지역 목록",-1)),s("ul",we,[(p(!0),v(D,null,A(o.list,(a,U)=>(p(),v("li",{class:"list-group-item d-flex align-items-center justify-content-between",key:U},[s("span",ke,r(a.city)+" "+r(a.county)+" "+r(a.town),1),s("div",$e,[s("button",{class:"btn list-btn btn-outline-primary btn-sm",onClick:N=>S(`${a.city} ${a.county} ${a.town}이(가) 선택되었습니다. 홈 화면에 등록하시겠습니까?`,"select",a.localId,`${a.city} ${a.county} ${a.town}`)}," 등록 ",8,xe),s("button",{class:"btn list-btn btn-outline-danger btn-sm",onClick:N=>S("선택한 지역을 삭제하시겠습니까?","remove",a.localId)}," 삭제 ",8,be),n(B,{modelValue:g.value,"onUpdate:modelValue":e[4]||(e[4]=N=>g.value=N),"max-width":"400"},{default:i(()=>[n(W,null,{default:i(()=>[n(P,null,{default:i(()=>e[6]||(e[6]=[x("확인")])),_:1,__:[6]}),n(M,null,{default:i(()=>[x(r(k.value),1)]),_:1}),n(z,null,{default:i(()=>[n(K),n(Y,{color:"dark",text:"",onClick:e[3]||(e[3]=N=>g.value=!1)},{default:i(()=>e[7]||(e[7]=[x("취소")])),_:1,__:[7]}),n(Y,{color:"primary",text:"",onClick:E},{default:i(()=>e[8]||(e[8]=[x("확인")])),_:1,__:[8]})]),_:1})]),_:1})]),_:1},8,["modelValue"])])]))),128))])])],64))}},Ve=R(De,[["__scopeId","data-v-dcf54b25"]]),Ce={class:"weather-alert"},Le={key:0},je={key:1},Re={class:"header flex justify-between items-center w-full px-4 pt-2"},Se={class:"d-none d-sm-flex"},Ie={key:0,class:"weather-content"},Te={class:"weather-left"},Ne={class:"weather-location"},We={class:"condition"},Me={class:"weather-right"},Be={class:"warp"},He={class:"weather-icon"},Ee={class:"temperature"},Fe={class:"max_min_temperature"},Ue={class:"humidity"},Ye={__name:"weather",setup(_){const c=X(),l=y(null),h=y(!1),w=y(""),u=y({daily:!1,location:!1}),f=new Date,o=f.getFullYear(),g=f.getMonth()+1,d=f.getDay(),k=`${o}년 ${g}월 ${d}일`,m=t=>{u.value[t]=!0},$=async()=>{const t=await ne();console.log("Weather res.data",t.data),l.value=t.data,l.value.ncstPty!=="없음"&&(l.value.villageSky=l.value.ncstPty)},L=async()=>{const t=await le();w.value=t.data.memberNick},S=j(()=>{const t=l.value.villagePop,e="오늘은 비올 확률이 "+l.value.villagePop+"% !!",a=l.value.villageSky;return t<10&&a==="맑음"||t<10&&a==="구름 많음"?"오늘의 날씨는 "+a+"이네요! 즐거운 하루 보내세요.":t<30&&(a==="맑음"||a==="구름 많음"||a==="흐림")?e+"걱정 되신다면 우산을 챙기길 추천해요!":t<50&&(a==="흐림"||a==="비")?e+"비가 올 수도 있으니 휴대하기 편한 우산 챙기길 추천해요!":t<90&&(a==="흐림"||a==="비")?e+"우산 챙기셨나요? 우산 챙겨가세요!":t>90||a==="비"?e+"우산을 꼭 챙기고 빗길 조심하세요!":"오늘 하루도 화이팅!"}),E=()=>h.value=!h.value,b={맑음:"☀️",흐림:"☁️","구름 많음":"🌤️",비:"🌧️",눈:"❄️","비/눈":"🌨️"},I=j(()=>b[l.value?.ncstPty]||b[l.value?.villageSky]),F=j(()=>{const t=new Date().getHours();return t>6&&t<19?"morning":t<22?"evening":"night"}),T={"맑음-morning":"url(/image/weather/clear_morning.jpg)","맑음-evening":"url(/image/weather/clear_afternoon.jpg)","맑음-night":"url(/image/weather/clear_night.jpg)","구름 많음-morning":"url(/image/weather/littlecloudy_morning.jpg)","구름 많음-evening":"url(/image/weather/littlecloudy.jpg)","구름 많음-night":"url(/image/weather/littlecloudy_night.jpg)","흐림-morning":"url(/image/weather/cloudy.jpg)","흐림-evening":"url(/image/weather/cloudy.jpg)","흐림-night":"url(/image/weather/cloudy_night.jpg)","비-morning":"url(/image/weather/rain.jpg)","비-evening":"url(/image/weather/rain.jpg)","비-night":"url(/image/weather/rain.jpg)",default:"url(/image/loading.gif)"},V=j(()=>{const t=l.value?.villageSky||"",e=F.value;return T[`${t}-${e}`]||T.default});return H(async()=>{L(),await $()}),Q(()=>c.refresh,async()=>{await $()}),(t,e)=>(p(),v(D,null,[s("div",Ce,[l.value?(p(),v("div",Le,[s("strong",null,r(w.value===""||w.value===void 0?"":w.value+"님~"),1),x(r(S.value),1)])):(p(),v("div",je,"로딩중. . ."))]),s("div",Re,[e[8]||(e[8]=s("span",{class:"live px-4 py-1 text-white font-semibold text-sm"}," 실시간 날씨 정보 ",-1)),s("button",{onClick:E,class:"menu px-2 py-1 text-sm font-bold"}," ☰ 날씨 메뉴 "),h.value?(p(),v("button",{key:0,class:"menu-list",onClick:e[1]||(e[1]=a=>m("daily"))},[e[5]||(e[5]=x(" 시간별 날씨 ")),n(B,{modelValue:u.value.daily,"onUpdate:modelValue":e[0]||(e[0]=a=>u.value.daily=a),"max-width":"1000","min-height":"100"},{default:i(()=>[n(W,null,{default:i(()=>[n(P,{class:"text-h8"},{default:i(()=>[x(r(k)+" 날씨")]),_:1}),n(M,null,{default:i(()=>[n(de)]),_:1})]),_:1})]),_:1},8,["modelValue"])])):O("",!0),h.value?(p(),v("button",{key:1,class:"menu-list",onClick:e[4]||(e[4]=a=>m("location"))},[e[7]||(e[7]=x(" 지역 변경 ")),n(B,{modelValue:u.value.location,"onUpdate:modelValue":e[3]||(e[3]=a=>u.value.location=a),"max-width":"1000","min-height":"200"},{default:i(()=>[n(W,null,{default:i(()=>[n(P,{class:"text-h8"},{default:i(()=>e[6]||(e[6]=[x("지역 저장")])),_:1,__:[6]}),n(M,null,{default:i(()=>[n(Ve,{onClose:e[2]||(e[2]=a=>u.value.location=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])])):O("",!0)]),s("div",{class:"weather-card d-flex d-sm-none",style:q({backgroundImage:V.value})},null,4),s("div",Se,[s("div",{class:"weather-card",style:q({backgroundImage:V.value})},[l.value?(p(),v("div",Ie,[s("div",Te,[s("div",Ne,r(l.value.localName),1),s("div",We,r(l.value.villageSky)+" "+r(l.value.villageSky==="비"?l.value.ncstRh1+"(mm)":""),1)]),s("div",Me,[s("div",Be,[s("div",He,r(I.value),1),s("div",Ee,r(l.value.ncstTem===void 0?"":l.value.ncstTem+"℃"),1)]),s("div",Fe,r(l.value.villageTmn===void 0?"":"최저 "+l.value.villageTmn+"° / 최고 "+l.value.villageTmx+"°"),1),s("div",Ue,r(l.value.ncstReh===void 0?"":"습도"+l.value.ncstReh+"%"),1)])])):O("",!0)],4)])],64))}},Oe=R(Ye,[["__scopeId","data-v-c45b5997"]]),Pe={class:"reminder"},Ae={class:"list-date"},ze={class:"list"},Ke={class:"reminder-title"},qe={key:1,class:"empty-wrapper"},Ge={__name:"HomeReminder",setup(_){const c=oe(),l=J({todayReminder:[]}),h=new Date,w=h.getFullYear(),u=h.getMonth()+1,f=h.getDate(),o=`${w}-${String(u).padStart(2,"0")}-${String(f).padStart(2,"0")}`;H(async()=>{const d=await re(w,u);if(d===void 0||d.status!==200){alert("오류발생");return}c.setFullReminder(d.data);const k=h.getDay();l.todayReminder=c.state.fullReminder.filter(m=>{const $=m.repeat===!1&&m.startDate===o,L=m.repeat&&m.repeatDow?.includes(k)&&m.startDate<=o&&(!m.endDate||m.endDate>=o)&&!m.exceptionDate?.includes(o);return $||L})});const g=()=>{c.setCurrentYear(w),c.setCurrentMonth(u),c.setSelectedDate(o),console.log("format",o)};return(d,k)=>{const m=ie("router-link");return p(),v(D,null,[k[1]||(k[1]=s("div",{class:"header flex justify-between items-center w-full px-4 pt-2"},[s("span",{class:"list-title px-4 py-1 text-white font-semibold text-sm"},"오늘의 일정")],-1)),s("div",Pe,[s("span",Ae,r(G(w))+"년 "+r(u)+"월 "+r(G(f))+"일",1),s("ul",ze,[n(m,{class:"link",to:"/reminder",onClick:g},{default:i(()=>[l.todayReminder.length>0?(p(!0),v(D,{key:0},A(l.todayReminder,$=>(p(),v("li",{key:$.id,class:"list-card"},[s("span",Ke,"• "+r($.title),1)]))),128)):(p(),v("li",qe,k[0]||(k[0]=[s("span",{class:"empty-comment"},'"오늘은 한가한 하루네요!"',-1)])))]),_:1})])])],64)}}},Je=R(Ge,[["__scopeId","data-v-628c56f4"]]),Qe={class:"home-layout"},Xe={class:"reminder-wrapper mt-6"},Ze={class:"report-wrapper mt-10"},et={__name:"Home",setup(_){return(c,l)=>(p(),v(D,null,[n(Oe,{class:"weather-layout"}),s("div",Qe,[s("div",Xe,[n(Je)]),s("div",Ze,[n(ue)])])],64))}},at=R(et,[["__scopeId","data-v-eb38fc03"]]);export{at as default};
