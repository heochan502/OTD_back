import{_ as P,r as h,c as F,o as H,a as w,b as _,F as I,d as K,t as r,g as te,e as B,f as le,h as e,w as ae,V as se,i as t,j as N,k as W,l as d,m as M,n as Q,p as ne,q as O,s as oe,u as a,v as re,x as Y,y as E,z as A,A as U,B as ue,C as X,D as Z,E as de,G as ie,H as ce,I as ve,J as q,K as me,L as G,M as fe,N as pe,O as _e,P as ge,Q as J,R as ye,S as he}from "./index-BwwlyrXB.js";const we={__name:"DailyWeather",setup(D){const i=h([]),s=h(null),$=async()=>{const l=await te();i.value=l.data},V= l=>`${parseInt(l.substring(0,2),10)}시`,c=F(()=>i.value.map(l=>({...l,time:V(l.fcstTime),emoji:v[l.pty]||v[l.sky]||""}))),v={맑음:"☀️",흐림:"☁️","구름 많음":"🌤️",비:"🌧️",눈:"❄️","비/눈":"🌨️"};return H(async()=>{await $();const l=s.value;l.addEventListener("wheel", b=>{b.preventDefault(),l.scrollLeft+=b.deltaY})}),(l, b)=>(_(),w("div",{class:"info",ref_key:"scrollRef",ref:s},[(_(!0),w(I,null,K(c.value, g=>(_(),w("div",{class:"item",key:g.fcstTime},r(g.time)+" "+r(g.emoji)+" "+r(g.tmp)+"℃ ",1))),128))],512))}},ke=P(we,[["__scopeId","data-v-4d95ab11"]]);B.defaults.baseURL="/api/OTD";const xe= D=>B.get("/location/search",{params:{keyword:D}}).catch(i=>i.response),z= D=>B.post("/location/post",D).catch(i=>i.response),$e=()=>B.get("/location/list").catch(D=>D.response),Ve= D=>B.delete(`/location/delete/${D}`).catch(i=>i.response),be= D=>B.put(`location/select/${D}`).catch(i=>i.response),ee=le("weather",{state:()=>({refresh:!1}),actions:{homeRefresh(){this.refresh=!this.refresh}}}),De={class:"search-box"},Ce={key:0,class:"result-list"},Se={key:1},Le={__name:"SearchAPI",emits:["saved"],setup(D, {emit:i}){const s=i,$=h(""),V=h([]),c=h(!1),v=h(!1),l=h(null),b=h(!1),g=h(""),L=async()=>{if(!(!$.value||!$.value.toString().trim()))try{const m=await xe($.value);V.value=m.data,c.value=!0}catch(m){console.error("검색 실패:",m)}},x= m=>{l.value=m,v.value=!0,console.log("select",l.value)},j=async()=>{if(l.value){try{if(l.value.title!=null){const m=await z({title:l.value.title,roadAddress:l.value.road,parcelAddress:l.value.parcel,lat:l.value.lat,lon:l.value.lon});g.value=m.data,s("saved")}else if(l.value.bldnm==null){const m=await z({title:l.value.title,roadAddress:"",parcelAddress:l.value.parcel,lat:l.value.lat,lon:l.value.lon});g.value=m.data,s("saved")}else{const m=await z({title:l.value.bldnm,roadAddress:l.value.road,parcelAddress:l.value.parcel,lat:l.value.lat,lon:l.value.lon});g.value=m.data,s("saved")}}catch(m){g.value=m.response?.data||"주소 저장 실패"}b.value=!0,v.value=!1,c.value=!1}};return(m, o)=>(_(),w("div",De,[e(se,{modelValue:$.value,"onUpdate:modelValue":o[0]||(o[0]= k=>$.value=k),label:"주소 검색",placeholder:"예) 그린컴퓨터학원","hide-details":"",onKeyup:ae(L,["enter"]),clearable:""},null,8,["modelValue"]),e(U,{modelValue:c.value,"onUpdate:modelValue":o[2]||(o[2]= k=>c.value=k),"max-width":"700"},{default:t(()=>[e(N,null,{default:t(()=>[e(W,null,{default:t(()=>o[7]||(o[7]=[d("검색 결과")])),_:1,__:[7]}),e(M,null,{default:t(()=>[V.value.length?(_(),w("div",Ce,[e(Q,null,{default:t(()=>[(_(!0),w(I,null,K(V.value,(k, R)=>(_(),ne(O,{key:R,onClick: C=>x(k)},{default:t(()=>[e(oe,null,{default:t(()=>[a("strong",null,r(k.title),1)]),_:2},1024),e(re,null,{default:t(()=>[d(r(k.road)+" ("+r(k.parcel)+") ",1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})])):(_(),w("div",Se,"검색 결과가 없습니다."))]),_:1}),e(Y,null,{default:t(()=>[e(E),e(A,{text:"",onClick:o[1]||(o[1]= k=>c.value=!1)},{default:t(()=>o[8]||(o[8]=[d("닫기")])),_:1,__:[8]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:v.value,"onUpdate:modelValue":o[4]||(o[4]= k=>v.value=k),"max-width":"400"},{default:t(()=>[e(N,null,{default:t(()=>[e(W,null,{default:t(()=>o[9]||(o[9]=[d("확인")])),_:1,__:[9]}),e(M,null,{default:t(()=>[d(r(l.value?.road)+"("+r(l.value?.parcel)+") 을(를) 추가하시겠습니까? ",1)]),_:1}),e(Y,null,{default:t(()=>[e(E),e(A,{color:"grey",text:"",onClick:o[3]||(o[3]= k=>v.value=!1)},{default:t(()=>o[10]||(o[10]=[d("취소")])),_:1,__:[10]}),e(A,{color:"primary",text:"",onClick:j},{default:t(()=>o[11]||(o[11]=[d("확인")])),_:1,__:[11]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:b.value,"onUpdate:modelValue":o[6]||(o[6]= k=>b.value=k),"max-width":"300"},{default:t(()=>[e(N,null,{default:t(()=>[e(M,null,{default:t(()=>[d(r(g.value),1)]),_:1}),e(Y,null,{default:t(()=>[e(E),e(A,{color:"primary",text:"",onClick:o[5]||(o[5]= k=>b.value=!1)},{default:t(()=>o[12]||(o[12]=[d("확인")])),_:1,__:[12]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]))}},je=P(Le,[["__scopeId","data-v-61d9221b"]]),Ae={class:"list card p-4 shadow-sm"},Ie={class:"list-group list-group-flush"},Re={class:"list-btn d-flex gap-2"},Te=["onClick"],Ne=["onUpdate:modelValue"],Me={__name:"Location",emits:["close"],setup(D, {emit:i}){const s=i,$=ee(),V=ue(),c=X({items:[],autocomplete:[],list:[]}),v=h(!1),l=h(!1),b=h({visible:!1,message:""}),g=h(""),L=h(null),x=h(null),j=h(""),m=(C, n, p=null, T="")=>{console.log("삭제 버튼 눌림 → localId:",p),console.log("item 전체 확인:",T),v.value=!0,g.value=C,L.value=n,x.value=p,j.value=T},o=async()=>{if(v.value=!1,L.value==="select"){const C=await be(x.value);C&&C.status===200&&($.homeRefresh(),s("close"),V.push("/"))}else L.value==="remove"&&(await Ve(x.value)).status===200&&(k("삭제되었습니다."),await R())},k= C=>{b.value.message=C,b.value.visible=!0},R=async()=>{const C=await $e();console.log(C.data),c.list=C.data};return H(()=>{R()}),(C, n)=>(_(),w(I,null,[e(je,{onSaved:R,class:"mb-0"}),a("div",Ae,[n[14]||(n[14]=a("h3",null,"저장한 지역 목록",-1)),a("ul",Ie,[(_(!0),w(I,null,K(c.list,(p, T)=>(_(),w("li",{class:"list-group-item d-flex align-items-center justify-content-between",key:T},[e(de,{location:"bottom"},{activator:t(({props:S})=>[a("span",Z({ref_for:!0},S,{class:"location-name"}),[a("strong",null,r(p.title),1),n[5]||(n[5]=d()),n[6]||(n[6]=a("br",null,null,-1)),d(r(p.roadAddress)+" ("+r(p.parcelAddress)+") ",1)],16)]),default:t(()=>[a("span",null,r(p.roadAddress)+"("+r(p.parcelAddress)+")",1)]),_:2},1024),a("div",Re,[a("button",{class:"btn list-btn btn-outline-primary btn-sm",onClick: S=>m(p.roadAddress==null?`${p.title}을(를) 등록하시겠습니까?`:`${p.title} (${p.roadAddress})을(를) 등록하시겠습니까?`,"select",p.id,`${p.title} ${p.roadAddress} ${p.parcelAddress}`)}," 등록 ",8,Te),a("button",{class:"btn list-btn btn-outline-danger btn-sm",onClick:n[0]||(n[0]= S=>l.value=!0)}," 편집 "),e(U,{modelValue:v.value,"onUpdate:modelValue":n[2]||(n[2]= S=>v.value=S),"max-width":"400"},{default:t(()=>[e(N,null,{default:t(()=>[e(W,null,{default:t(()=>n[7]||(n[7]=[d("확인")])),_:1,__:[7]}),e(M,null,{default:t(()=>[d(r(g.value),1)]),_:1}),e(Y,null,{default:t(()=>[e(E),e(A,{color:"dark",text:"",onClick:n[1]||(n[1]= S=>v.value=!1)},{default:t(()=>n[8]||(n[8]=[d("취소")])),_:1,__:[8]}),e(A,{color:"primary",text:"",onClick:o},{default:t(()=>n[9]||(n[9]=[d("확인")])),_:1,__:[9]})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:l.value,"onUpdate:modelValue":n[4]||(n[4]= S=>l.value=S),"max-width":"500"},{default:t(()=>[e(N,null,{default:t(()=>[e(W,null,{default:t(()=>n[10]||(n[10]=[d("편집")])),_:1,__:[10]}),e(M,null,{default:t(()=>[ie(a("input",{"onUpdate:modelValue": S=>p.title=S,type:"text"},null,8,Ne),[[ce,p.title]])]),_:2},1024),e(Y,null,{default:t(()=>[e(E),e(A,{color:"dark",text:"",onClick:n[3]||(n[3]= S=>l.value=!1)},{default:t(()=>n[11]||(n[11]=[d("취소")])),_:1,__:[11]}),e(A,{color:"primary",text:"",onClick:o},{default:t(()=>n[12]||(n[12]=[d("수정")])),_:1,__:[12]}),e(A,{color:"danger",onClick: S=>m("선택한 지역을 삭제하시겠습니까?","remove",p.id)},{default:t(()=>n[13]||(n[13]=[d("삭제")])),_:2,__:[13]},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])])]))),128))])])],64))}},Ue=P(Me,[["__scopeId","data-v-3541e0c6"]]),We={class:"weather-alert"},Pe={key:0},Be={key:1},Fe={class:"header flex justify-between items-center w-full px-4 pt-2"},Ye={class:"weather-location"},Ee={class:"warp"},He={class:"weather-icon"},Ke={class:"temperature"},ze={class:"d-none d-sm-flex"},Oe={key:0,class:"weather-content"},qe={class:"weather-left"},Ge={class:"weather-location"},Je={class:"condition"},Qe={class:"weather-right"},Xe={class:"warp"},Ze={class:"weather-icon"},et={class:"temperature"},tt={class:"max_min_temperature"},lt={class:"humidity"},at={__name:"weather",setup(D){const i=ee(),s=h(null),$=h(!1),V=h(""),c=h({daily:!1,location:!1}),v=new Date,l=v.getFullYear(),b=v.getMonth()+1,g=v.getDate(),x=["일","월","화","수","목","금","토"][v.getDay()],j=`${l}년 ${b}월 ${g}일(${x})`,m= y=>{c.value[y]=!0},o=async()=>{const y=await pe();console.log("Weather res.data",y.data),s.value=y.data,s.value.ncstPty!=="없음"&&(s.value.villageSky=s.value.ncstPty)},k=async()=>{const y=await fe();V.value=y.data.memberNick},R=F(()=>{const y=s.value.villagePop,u="오늘은 비올 확률이 "+s.value.villagePop+"% !!",f=s.value.villageSky;return y<10&&f==="맑음"||y<10&&f==="구름 많음"?"오늘의 날씨는 "+f+"이네요! 즐거운 하루 보내세요.":y<30&&(f==="맑음"||f==="구름 많음"||f==="흐림")?u+"걱정 되신다면 우산을 챙기길 추천해요!":y<50&&(f==="흐림"||f==="비")?u+"비가 올 수도 있으니 휴대하기 편한 우산 챙기길 추천해요!":y<90&&(f==="흐림"||f==="비")?u+"우산 챙기셨나요? 우산 챙겨가세요!":y>90||f==="비"?u+"우산을 꼭 챙기고 빗길 조심하세요!":"오늘 하루도 화이팅!"}),C={맑음:"☀️",흐림:"☁️","구름 많음":"🌤️",비:"🌧️",눈:"❄️","비/눈":"🌨️"},n=F(()=>C[s.value?.ncstPty]||C[s.value?.villageSky]),p=F(()=>{const y=new Date().getHours();return y>6&&y<19?"morning":y<22?"evening":"night"}),T={"맑음-morning":"url(/image/weather/clear_morning.jpg)","맑음-evening":"url(/image/weather/clear_afternoon.jpg)","맑음-night":"url(/image/weather/clear_night.jpg)","구름 많음-morning":"url(/image/weather/littlecloudy_morning.jpg)","구름 많음-evening":"url(/image/weather/littlecloudy.jpg)","구름 많음-night":"url(/image/weather/littlecloudy_night.jpg)","흐림-morning":"url(/image/weather/cloudy.jpg)","흐림-evening":"url(/image/weather/cloudy.jpg)","흐림-night":"url(/image/weather/cloudy_night.jpg)","비-morning":"url(/image/weather/rain.jpg)","비-evening":"url(/image/weather/rain.jpg)","비-night":"url(/image/weather/rain.jpg)",default:"url(/image/loading.gif)"},S=F(()=>{const y=s.value?.villageSky||"",u=p.value;return T[`${y}-${u}`]||T.default});return H(async()=>{k(),await o()}),ve(()=>i.refresh,async()=>{await o()}),(y, u)=>(_(),w(I,null,[a("div",We,[s.value?(_(),w("div",Pe,[a("strong",null,r(V.value===""||V.value===void 0?"":V.value+"님~"),1),d(r(R.value),1)])):(_(),w("div",Be,"로딩중. . ."))]),a("div",Fe,[u[9]||(u[9]=a("span",{class:"live px-4 py-1 text-white font-semibold text-sm"}," 실시간 날씨 정보 ",-1)),e(me,{modelValue:$.value,"onUpdate:modelValue":u[2]||(u[2]= f=>$.value=f),"offset-y":"",location:"bottom end"},{activator:t(({props:f})=>[a("button",Z(f,{class:"menu px-2 py-1 text-sm font-bold"})," ☰ 날씨 메뉴 ",16)]),default:t(()=>[e(Q,{class:"menu-list"},{default:t(()=>[e(O,{onClick:u[0]||(u[0]= f=>m("daily"))},{default:t(()=>u[6]||(u[6]=[d("시간별 날씨")])),_:1,__:[6]}),e(O,{onClick:u[1]||(u[1]= f=>m("location"))},{default:t(()=>u[7]||(u[7]=[d("지역 변경")])),_:1,__:[7]})]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:c.value.daily,"onUpdate:modelValue":u[3]||(u[3]= f=>c.value.daily=f),"max-width":"1000","min-height":"100"},{default:t(()=>[e(N,null,{default:t(()=>[e(W,{class:"text-h8"},{default:t(()=>[d(r(j)+" 날씨")]),_:1}),e(M,null,{default:t(()=>[e(ke)]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(U,{modelValue:c.value.location,"onUpdate:modelValue":u[5]||(u[5]= f=>c.value.location=f),"max-width":"1000","min-height":"200"},{default:t(()=>[e(N,null,{default:t(()=>[e(W,{class:"text-h8"},{default:t(()=>u[8]||(u[8]=[d("지역 검색 및 목록")])),_:1,__:[8]}),e(M,null,{default:t(()=>[e(Ue,{onClose:u[4]||(u[4]= f=>c.value.location=!1)})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s.value?(_(),w("div",{key:0,class:"weather-card d-flex d-sm-none",style:G({backgroundImage:S.value})},[a("div",Ye,r(s.value.localName),1),a("div",Ee,[a("div",He,r(n.value),1),a("div",Ke,r(s.value.ncstTem===void 0?"":s.value.ncstTem+"℃"),1)])],4)):q("",!0),a("div",ze,[a("div",{class:"weather-card",style:G({backgroundImage:S.value})},[s.value?(_(),w("div",Oe,[a("div",qe,[a("div",Ge,r(s.value.localName),1),a("div",Je,r(s.value.villageSky)+" "+r(s.value.villageSky==="비"?s.value.ncstRh1+"(mm)":""),1)]),a("div",Qe,[a("div",Xe,[a("div",Ze,r(n.value),1),a("div",et,r(s.value.ncstTem===void 0?"":s.value.ncstTem+"℃"),1)]),a("div",tt,r(s.value.villageTmn===void 0?"":"최저 "+s.value.villageTmn+"° / 최고 "+s.value.villageTmx+"°"),1),a("div",lt,r(s.value.ncstReh===void 0?"":"습도"+s.value.ncstReh+"%"),1)])])):q("",!0)],4)])],64))}},st=P(at,[["__scopeId","data-v-0a517ba4"]]),nt={class:"reminder"},ot={class:"list-date"},rt={class:"list"},ut={class:"reminder-title"},dt={key:1,class:"empty-wrapper"},it={__name:"HomeReminder",setup(D){const i=_e(),s=X({todayReminder:[]}),$=new Date,V=$.getFullYear(),c=$.getMonth()+1,v=$.getDate(),l=`${V}-${String(c).padStart(2,"0")}-${String(v).padStart(2,"0")}`;H(async()=>{const g=await ge(V,c);if(g===void 0||g.status!==200){alert("오류발생");return}i.setFullReminder(g.data);const L=$.getDay();s.todayReminder=i.state.fullReminder.filter(x=>{const j=x.repeat===!1&&x.startDate===l,m=x.repeat&&x.repeatDow?.includes(L)&&x.startDate<=l&&(!x.endDate||x.endDate>=l)&&!x.exceptionDate?.includes(l);return j||m})});const b=()=>{i.setCurrentYear(V),i.setCurrentMonth(c),i.setSelectedDate(l),console.log("format",l)};return(g, L)=>{const x=ye("router-link");return _(),w(I,null,[L[1]||(L[1]=a("div",{class:"header flex justify-between items-center w-full px-4 pt-2"},[a("span",{class:"list-title px-4 py-1 text-white font-semibold text-sm"},"오늘의 일정")],-1)),a("div",nt,[a("span",ot,r(J(V))+"년 "+r(c)+"월 "+r(J(v))+"일",1),a("ul",rt,[e(x,{class:"link",to:"/reminder",onClick:b},{default:t(()=>[s.todayReminder.length>0?(_(!0),w(I,{key:0},K(s.todayReminder, j=>(_(),w("li",{key:j.id,class:"list-card"},[a("span",ut,"• "+r(j.title),1)]))),128)):(_(),w("li",dt,L[0]||(L[0]=[a("span",{class:"empty-comment"},'"오늘은 한가한 하루네요!"',-1)])))]),_:1})])])],64)}}},ct=P(it,[["__scopeId","data-v-628c56f4"]]),vt={class:"home-layout"},mt={class:"reminder-wrapper mt-6"},ft={class:"report-wrapper mt-10"},pt={__name:"Home",setup(D){return(i, s)=>(_(),w(I,null,[e(st,{class:"weather-layout"}),a("div",vt,[a("div",mt,[e(ct)]),a("div",ft,[e(he)])])],64))}},gt=P(pt,[["__scopeId","data-v-969e1ac9"]]);export{gt as default};
